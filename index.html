<!DOCTYPE html>
<html lang="te">
<head>
  <meta charset="UTF-8">
  <title>CVK ENTERPRISE – Order</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    input, button { padding: 6px; margin: 4px; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #aaa; padding: 6px; text-align: left; }
    th { background: #f0f0f0; }
  </style>
</head>
<body>

<h2>CVK ENTERPRISE – Online Order</h2>

<h3>Customer Details</h3>
<input id="custName" placeholder="Customer Name"><br>
<input id="custMobile" placeholder="Mobile Number"><br>

<h3>Add Products</h3>
<input id="prodName" placeholder="Product Name">
<input id="prodQty" type="number" placeholder="Qty">
<button onclick="addProduct()">➕ Add Product</button>

<table>
  <thead>
    <tr>
      <th>Product</th>
      <th>Qty</th>
    </tr>
  </thead>
  <tbody id="productList"></tbody>
</table>

<br>
<button onclick="submitOrder()">✅ Submit Order</button>

<script>
const ORDER_API = "https://script.google.com/macros/s/AKfycbyAvqWNIyBJDKK6E1K51QlOKddsVyaznfJp7MbE7loD2w5XnaNOtJSY6vAmneMRwjEW/exec";

let products = [];

function addProduct() {
  const name = document.getElementById("prodName").value;
  const qty = document.getElementById("prodQty").value;

  if (!name || !qty) {
    alert("Product name & quantity ఇవ్వాలి");
    return;
  }

  products.push({ name, qty });

  const row = `<tr><td>${name}</td><td>${qty}</td></tr>`;
  document.getElementById("productList").innerHTML += row;

  document.getElementById("prodName").value = "";
  document.getElementById("prodQty").value = "";
}

function submitOrder() {
  if (products.length === 0) {
    alert("కనీసం ఒక product add చేయాలి");
    return;
  }

  const data = {
    customer: document.getElementById("custName").value,
    mobile: document.getElementById("custMobile").value,
    products: products
  };

  fetch(ORDER_API, {
    method: "POST",
    body: JSON.stringify(data)
  })
  .then(() => {
    alert("Order successfully submitted!");
    products = [];
    document.getElementById("productList").innerHTML = "";
  })
  .catch(() => alert("Error occurred"));
}
</script>

</body>
</html>
